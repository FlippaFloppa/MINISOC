apiVersion: networking.k8s.io/v1

kind: Ingress

metadata:

    namespace: kubernetes-dashboard

    name: kubernetes-dashboard-ingress

    annotations:

      nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"

      nginx.ingress.kubernetes.io/ssl-passthrough: "true"

      nginx.ingress.kubernetes.io/rewrite-target: /$2

spec:

  ingressClassName: nginx

  tls:

  - hosts:

        - dashboard.soc-svc

    secretName: dashboard-secret

  rules:

  - host: dashboard.soc-svc

    http:

      paths:

      - path: /dashboard(/|$)(.*)

        pathType: Prefix

        backend:

          service:

            name: kubernetes-dashboard

            port:

              number: 80


